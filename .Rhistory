means1
means2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, mean, na.rm=T))
means1
means2
means2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, mean, na.rm=T))
means2
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
#################### Unique peptides vs shared peptides ############
#### WrongID stats
benchShared <- benchs[benchs$SharedPep,]
benchUnique <- benchs[!benchs$SharedPep,]
for (metric in c("numQuantProtGroups", "propUniqueProts", "meanPepPerProt","aucDiffRegProteins.FDR_PolySTest.2.vs.1.AUC",
"tprProt0.05.FDR_PolySTest.2.vs.1.TPR","tFDRProt0.05.FDR_PolySTest.2.vs.1.tFDR",
"meanSquareDiffFCProt","propDiffRegWrongIDProt0.05.FDR_PolySTest.2.vs.1")) {
means1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, mean, na.rm=T))
sds1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, sd, na.rm=T))
means2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, mean, na.rm=T))
sds2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, sd, na.rm=T))
plotCI(unique(benchShared$MinUniquePep), means1-means2, rowMeans(cbind(sds1, sds2)),
xlab = "Min unique peptides per protein", ylab = "\u0394 shared vs unique", main = NA)
abline(h=0, lty=2, col="gray")
}
par(mfrow=c(2,4))
#################### Unique peptides vs shared peptides ############
#### WrongID stats
benchShared <- benchs[benchs$SharedPep,]
benchUnique <- benchs[!benchs$SharedPep,]
for (metric in c("numQuantProtGroups", "propUniqueProts", "meanPepPerProt","aucDiffRegProteins.FDR_PolySTest.2.vs.1.AUC",
"tprProt0.05.FDR_PolySTest.2.vs.1.TPR","tFDRProt0.05.FDR_PolySTest.2.vs.1.tFDR",
"meanSquareDiffFCProt","propDiffRegWrongIDProt0.05.FDR_PolySTest.2.vs.1")) {
means1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, mean, na.rm=T))
sds1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, sd, na.rm=T))
means2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, mean, na.rm=T))
sds2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, sd, na.rm=T))
plotCI(unique(benchShared$MinUniquePep), means1-means2, rowMeans(cbind(sds1, sds2)),
xlab = "Min unique peptides per protein", ylab = "\u0394 shared vs unique", main = NA)
abline(h=0, lty=2, col="gray")
}
pdf(width=10, height=3)
#################### Unique peptides vs shared peptides ############
#### WrongID stats
benchShared <- benchs[benchs$SharedPep,]
benchUnique <- benchs[!benchs$SharedPep,]
for (metric in c("numQuantProtGroups", "propUniqueProts", "meanPepPerProt","aucDiffRegProteins.FDR_PolySTest.2.vs.1.AUC",
"tprProt0.05.FDR_PolySTest.2.vs.1.TPR","tFDRProt0.05.FDR_PolySTest.2.vs.1.tFDR",
"meanSquareDiffFCProt","propDiffRegWrongIDProt0.05.FDR_PolySTest.2.vs.1")) {
means1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, mean, na.rm=T))
sds1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, sd, na.rm=T))
means2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, mean, na.rm=T))
sds2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, sd, na.rm=T))
plotCI(unique(benchShared$MinUniquePep), means1-means2, rowMeans(cbind(sds1, sds2)),
xlab = "Min unique peptides per protein", ylab = "\u0394 shared vs unique", main = NA)
abline(h=0, lty=2, col="gray")
}
dev.off()
pdf(width=10, height=3)
par(mfrow=c(2,4))
benchShared <- benchs[benchs$SharedPep,]
benchUnique <- benchs[!benchs$SharedPep,]
for (metric in c("numQuantProtGroups", "propUniqueProts", "meanPepPerProt","aucDiffRegProteins.FDR_PolySTest.2.vs.1.AUC",
"tprProt0.05.FDR_PolySTest.2.vs.1.TPR","tFDRProt0.05.FDR_PolySTest.2.vs.1.tFDR",
"meanSquareDiffFCProt","propDiffRegWrongIDProt0.05.FDR_PolySTest.2.vs.1")) {
means1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, mean, na.rm=T))
sds1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, sd, na.rm=T))
means2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, mean, na.rm=T))
sds2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, sd, na.rm=T))
plotCI(unique(benchShared$MinUniquePep), means1-means2, rowMeans(cbind(sds1, sds2)),
xlab = "Min unique peptides per protein", ylab = "\u0394 shared vs unique", main = NA)
abline(h=0, lty=2, col="gray")
}
dev.off()
pdf(width=10, height=4)
par(mfrow=c(2,4))
benchShared <- benchs[benchs$SharedPep,]
benchUnique <- benchs[!benchs$SharedPep,]
for (metric in c("numQuantProtGroups", "propUniqueProts", "meanPepPerProt","aucDiffRegProteins.FDR_PolySTest.2.vs.1.AUC",
"tprProt0.05.FDR_PolySTest.2.vs.1.TPR","tFDRProt0.05.FDR_PolySTest.2.vs.1.tFDR",
"meanSquareDiffFCProt","propDiffRegWrongIDProt0.05.FDR_PolySTest.2.vs.1")) {
means1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, mean, na.rm=T))
sds1 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, sd, na.rm=T))
means2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, mean, na.rm=T))
sds2 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, sd, na.rm=T))
plotCI(unique(benchShared$MinUniquePep), means1-means2, rowMeans(cbind(sds1, sds2)),
xlab = "Min unique peptides per protein", ylab = "\u0394 shared vs unique", main = NA)
abline(h=0, lty=2, col="gray")
}
dev.off()
fileext <- "OxWithoutEnrichment_multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
fileext <- "PhOxWithoutEnrichment_multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
fileext <- "PhOxWithoutEnrichment_multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
fileext <- "PhOxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
# get benchmarks
simvars <- list(test = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics = 1:45),
WrongIDs_Multi = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics =  c(2, 18, 22, 24, 27)),
DiffReg_New = list(simvar=c("DiffRegFrac", "DiffRegMax"), filter = "DiffRegFrac==0.2", metrics = 1:45),
MisCleav_Multi = list(simvar="PropMissedCleavages", filter = "PepMaxLength==30", metrics = c(1:3, 11, 13, 17, 18, 21)),
MisCleav_PepLength_New = list(simvar=c("PropMissedCleavages","PepMaxLength"), filter = NULL, metrics = c(1:3, 11, 18, 21)),
SeqLength = list(simvar="PepMaxLength", filter = NULL, metrics = 1:45),
NumReps_New = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
NumReps_Multi = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
ExpressedProt = list(simvar="PercExpressedProt", filter = NULL, metrics = 1:45),
WrongIDs = list(simvar="WrongIDs", filter = NULL, metrics = c(2, 18, 22, 24)),
UniquePeps_Shared_Big_LargerDiff = list(simvar=c("MinUniquePep", "SharedPep"), filter = NULL, metrics = c(18, 21, 22, 23, 26, 27, 29, 30)),
UniquePeps_Shared_Multi = list(simvar=c("MinUniquePep", "SharedPep"), filter = "SharedPep!=FALSE", metrics = c(18, 19, 21, 22, 24, 26, 27, 31)),
PercExpressedProt_PercDetectability_New = list(simvar=c("PercExpressedProt", "PercDetectability"), filter = NULL, metrics = 1:45),
OxWithoutEnrichment_PercExpressedProt_New = list(simvar=c("FracModProt","PercExpressedProt"), filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
OxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
PhOxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
OxWithoutEnrichment = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36))
)
fileext <- "OxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
fileext <- "PhOxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
fileext <- "OxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
fileext <- "PhOxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
fileext <- "OxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
benchs
benchs$X
benchs$X[1:22]
runs <- benchs$X[1:22]
# Retrieve runs from the server
pre_location <- "protprotocols.bmb.srv.sdu.dk:~/ProteoMaker/SimulatedDataSets/outputDataAnalysis_"
for (run in runs) {
if (!file.exists(paste0("tmp/outputDataAnalysis_", run, ".RData"))) {
system(paste0("scp ", pre_location, run, ".RData tmp/"))
} else {
print(paste0("File for run ", run, " already exists locally."))
}
}
for (file in paste0("tmp/outputDataAnalysis_", benchs$X[1:22], ".RData")) file.copy(file, "/tmp/ProteoMaker/")
write.csv(benchs[1:22,], "/tmp/Benchmarks_Params.csv")
write.csv(benchs[1:22,], "/tmp/ProteoMaker/Benchmarks_Params.csv")
fileext <- "PhOxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
benchs$X[1:22]
benchs$X[1:25]
runs <- benchs$X[1:22]
# Retrieve runs from the server
pre_location <- "protprotocols.bmb.srv.sdu.dk:~/ProteoMaker/SimulatedDataSets/outputDataAnalysis_"
for (run in runs) {
if (!file.exists(paste0("tmp/outputDataAnalysis_", run, ".RData"))) {
system(paste0("scp ", pre_location, run, ".RData tmp/"))
} else {
print(paste0("File for run ", run, " already exists locally."))
}
}
for (file in paste0("tmp/outputDataAnalysis_", benchs$X[1:22], ".RData")) file.copy(file, "/tmp/ProteoMaker/")
write.csv(benchs[1:22,], "/tmp/ProteoMaker/Benchmarks_Params.csv")
fileext <- "UniquePeps_Shared_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
runs <- benchs$X[1:22]
# Retrieve runs from the server
pre_location <- "protprotocols.bmb.srv.sdu.dk:~/ProteoMaker/SimulatedDataSets/outputDataAnalysis_"
for (run in runs) {
if (!file.exists(paste0("tmp/outputDataAnalysis_", run, ".RData"))) {
system(paste0("scp ", pre_location, run, ".RData tmp/"))
} else {
print(paste0("File for run ", run, " already exists locally."))
}
}
redbenchs <- matrix(NA, nrow = length(benchs$X), ncol = 8,
dimnames = list(benchs$X, c("meanSquareDiffFCPep", "meanSquareDiffFCPep2", "meanSquareDiffFCProt_0",
"meanSquareDiffFCProt_1", "meanSquareDiffFCProt_2",
"meanSquareDiffFCProt_3", "meanSquareDiffFCProt_4",
"meanSquareDiffFCProt_5")))
protcounts <- matrix(NA, nrow = length(benchs$X), ncol = 10, dimnames= list(benchs$X, paste("# Peptides", 1:10)))
pdf(width=10, height=4)
par(mfrow=c(2,4))
#################### Unique peptides vs shared peptides ############
#### WrongID stats
benchShared <- benchs[benchs$SharedPep,]
benchUnique <- benchs[!benchs$SharedPep,]
for (metric in c("numQuantProtGroups", "propUniqueProts", "meanPepPerProt","aucDiffRegProteins.FDR_PolySTest.2.vs.1.AUC",
"tprProt0.05.FDR_PolySTest.2.vs.1.TPR","tFDRProt0.05.FDR_PolySTest.2.vs.1.tFDR",
"meanSquareDiffFCProt","propDiffRegWrongIDProt0.05.FDR_PolySTest.2.vs.1")) {
means2 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, mean, na.rm=T))
sds2 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, sd, na.rm=T))
means1 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, mean, na.rm=T))
sds1 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, sd, na.rm=T))
plotCI(unique(benchShared$MinUniquePep), means1-means2, rowMeans(cbind(sds1, sds2)),
xlab = "Min unique peptides per protein", ylab = "\u0394 Unique proteins", main = NA)
abline(h=0, lty=2, col="gray")
}
submetrics <- matrix(NA, nrow = length(runs), ncol = 4)
fileext <- "UniquePeps_Shared_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
#################### Unique peptides vs shared peptides ############
#### WrongID stats
benchShared <- benchs[benchs$SharedPep,]
benchUnique <- benchs[!benchs$SharedPep,]
for (metric in c("numQuantProtGroups", "propUniqueProts", "meanPepPerProt","aucDiffRegProteins.FDR_PolySTest.2.vs.1.AUC",
"tprProt0.05.FDR_PolySTest.2.vs.1.TPR","tFDRProt0.05.FDR_PolySTest.2.vs.1.tFDR",
"meanSquareDiffFCProt","propDiffRegWrongIDProt0.05.FDR_PolySTest.2.vs.1")) {
means2 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, mean, na.rm=T))
sds2 <- unlist(by(benchShared[[metric]], benchShared$MinUniquePep, sd, na.rm=T))
means1 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, mean, na.rm=T))
sds1 <- unlist(by(benchUnique[[metric]], benchUnique$MinUniquePep, sd, na.rm=T))
plotCI(unique(benchShared$MinUniquePep), means1-means2, rowMeans(cbind(sds1, sds2)),
xlab = "Min unique peptides per protein", ylab = "\u0394 Unique proteins", main = NA)
abline(h=0, lty=2, col="gray")
}
submetrics <- matrix(NA, nrow = length(runs), ncol = 4)
dev.off
dev.off()
fileext <- "OxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
# Specific metrics for use case
ProteoMaker::visualize_benchmarks(benchs, unlist(usecase["metrics"]), ref_par = simvar[1], errorbar = T)
bench
benchs
# get benchmarks
simvars <- list(test = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics = 1:45),
WrongIDs_Multi = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics =  c(2, 18, 22, 24, 27)),
DiffReg_New = list(simvar=c("DiffRegFrac", "DiffRegMax"), filter = "DiffRegFrac==0.2", metrics = 1:45),
MisCleav_Multi = list(simvar="PropMissedCleavages", filter = "PepMaxLength==30", metrics = c(1:3, 11, 13, 17, 18, 21)),
MisCleav_PepLength_New = list(simvar=c("PropMissedCleavages","PepMaxLength"), filter = NULL, metrics = c(1:3, 11, 18, 21)),
SeqLength = list(simvar="PepMaxLength", filter = NULL, metrics = 1:45),
NumReps_New = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
NumReps_Multi = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
ExpressedProt = list(simvar="PercExpressedProt", filter = NULL, metrics = 1:45),
WrongIDs = list(simvar="WrongIDs", filter = NULL, metrics = c(2, 18, 22, 24)),
UniquePeps_Shared_Big_LargerDiff = list(simvar=c("MinUniquePep", "SharedPep"), filter = NULL, metrics = c(18, 21, 22, 23, 26, 27, 29, 30)),
UniquePeps_Shared_Multi = list(simvar=c("MinUniquePep", "SharedPep"), filter = "SharedPep!=FALSE", metrics = c(18, 19, 21, 22, 24, 26, 27, 31)),
PercExpressedProt_PercDetectability_New = list(simvar=c("PercExpressedProt", "PercDetectability"), filter = NULL, metrics = 1:45),
OxWithoutEnrichment_PercExpressedProt_New = list(simvar=c("FracModProt","PercExpressedProt"), filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
OxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = "IncludeModPep==FALSE", metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
PhOxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
OxWithoutEnrichment = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36))
)
fileext <- "OxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
# get benchmarks
simvars <- list(test = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics = 1:45),
WrongIDs_Multi = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics =  c(2, 18, 22, 24, 27)),
DiffReg_New = list(simvar=c("DiffRegFrac", "DiffRegMax"), filter = "DiffRegFrac==0.2", metrics = 1:45),
MisCleav_Multi = list(simvar="PropMissedCleavages", filter = "PepMaxLength==30", metrics = c(1:3, 11, 13, 17, 18, 21)),
MisCleav_PepLength_New = list(simvar=c("PropMissedCleavages","PepMaxLength"), filter = NULL, metrics = c(1:3, 11, 18, 21)),
SeqLength = list(simvar="PepMaxLength", filter = NULL, metrics = 1:45),
NumReps_New = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
NumReps_Multi = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
ExpressedProt = list(simvar="PercExpressedProt", filter = NULL, metrics = 1:45),
WrongIDs = list(simvar="WrongIDs", filter = NULL, metrics = c(2, 18, 22, 24)),
UniquePeps_Shared_Big_LargerDiff = list(simvar=c("MinUniquePep", "SharedPep"), filter = NULL, metrics = c(18, 21, 22, 23, 26, 27, 29, 30)),
UniquePeps_Shared_Multi = list(simvar=c("MinUniquePep", "SharedPep"), filter = "SharedPep!=FALSE", metrics = c(18, 19, 21, 22, 24, 26, 27, 31)),
PercExpressedProt_PercDetectability_New = list(simvar=c("PercExpressedProt", "PercDetectability"), filter = NULL, metrics = 1:45),
OxWithoutEnrichment_PercExpressedProt_New = list(simvar=c("FracModProt","PercExpressedProt"), filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
OxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = "IncludeModPep==TRUE", metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
PhOxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
OxWithoutEnrichment = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36))
)
fileext <- "OxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
devtools::load_all("../ProteoMaker")
fileext <- "OxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
# Specific metrics for use case
ProteoMaker::visualize_benchmarks(benchs, unlist(usecase["metrics"]), ref_par = simvar[1], errorbar = T)
# get benchmarks
simvars <- list(test = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics = 1:45),
WrongIDs_Multi = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics =  c(2, 18, 22, 24, 27)),
DiffReg_New = list(simvar=c("DiffRegFrac", "DiffRegMax"), filter = "DiffRegFrac==0.2", metrics = 1:45),
MisCleav_Multi = list(simvar="PropMissedCleavages", filter = "PepMaxLength==30", metrics = c(1:3, 11, 13, 17, 18, 21)),
MisCleav_PepLength_New = list(simvar=c("PropMissedCleavages","PepMaxLength"), filter = NULL, metrics = c(1:3, 11, 18, 21)),
SeqLength = list(simvar="PepMaxLength", filter = NULL, metrics = 1:45),
NumReps_New = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
NumReps_Multi = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
ExpressedProt = list(simvar="PercExpressedProt", filter = NULL, metrics = 1:45),
WrongIDs = list(simvar="WrongIDs", filter = NULL, metrics = c(2, 18, 22, 24)),
UniquePeps_Shared_Big_LargerDiff = list(simvar=c("MinUniquePep", "SharedPep"), filter = NULL, metrics = c(18, 21, 22, 23, 26, 27, 29, 30)),
UniquePeps_Shared_Multi = list(simvar=c("MinUniquePep", "SharedPep"), filter = "SharedPep!=FALSE", metrics = c(18, 19, 21, 22, 24, 26, 27, 31)),
PercExpressedProt_PercDetectability_New = list(simvar=c("PercExpressedProt", "PercDetectability"), filter = NULL, metrics = 1:45),
OxWithoutEnrichment_PercExpressedProt_New = list(simvar=c("FracModProt","PercExpressedProt"), filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
OxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = "IncludeModPep==TRUE", metrics = c(1:3, 21, 22, 24, 28, 36, 37)),
PhOxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
OxWithoutEnrichment = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36))
)
fileext <- "OxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
# Specific metrics for use case
ProteoMaker::visualize_benchmarks(benchs, unlist(usecase["metrics"]), ref_par = simvar[1], errorbar = T)
X11()
# get benchmarks
simvars <- list(test = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics = 1:45),
WrongIDs_Multi = list(simvar="WrongIDs", filter = "SharedPep==TRUE", metrics =  c(2, 18, 22, 24, 27)),
DiffReg_New = list(simvar=c("DiffRegFrac", "DiffRegMax"), filter = "DiffRegFrac==0.2", metrics = 1:45),
MisCleav_Multi = list(simvar="PropMissedCleavages", filter = "PepMaxLength==30", metrics = c(1:3, 11, 13, 17, 18, 21)),
MisCleav_PepLength_New = list(simvar=c("PropMissedCleavages","PepMaxLength"), filter = NULL, metrics = c(1:3, 11, 18, 21)),
SeqLength = list(simvar="PepMaxLength", filter = NULL, metrics = 1:45),
NumReps_New = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
NumReps_Multi = list(simvar="NumReps", filter = NULL, metrics = c(1:2, 5, 6:7, 13:14, 18, 22:23, 28:29)),
ExpressedProt = list(simvar="PercExpressedProt", filter = NULL, metrics = 1:45),
WrongIDs = list(simvar="WrongIDs", filter = NULL, metrics = c(2, 18, 22, 24)),
UniquePeps_Shared_Big_LargerDiff = list(simvar=c("MinUniquePep", "SharedPep"), filter = NULL, metrics = c(18, 21, 22, 23, 26, 27, 29, 30)),
UniquePeps_Shared_Multi = list(simvar=c("MinUniquePep", "SharedPep"), filter = "SharedPep!=FALSE", metrics = c(18, 19, 21, 22, 24, 26, 27, 31)),
PercExpressedProt_PercDetectability_New = list(simvar=c("PercExpressedProt", "PercDetectability"), filter = NULL, metrics = 1:45),
OxWithoutEnrichment_PercExpressedProt_New = list(simvar=c("FracModProt","PercExpressedProt"), filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36)),
OxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = "IncludeModPep==TRUE", metrics = c(1:3, 21, 22, 24, 28, 36, 37)),
PhOxWithoutEnrichment_Multi = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 21, 22, 24, 28, 36, 37)),
OxWithoutEnrichment = list(simvar="FracModProt", filter = NULL, metrics = c(1:3, 12, 13, 18, 21, 22, 23, 25, 27, 33, 36))
)
fileext <- "PhOxWithoutEnrichment_Multi"
usecase <- simvars[[fileext]]
simvar <- unlist(usecase["simvar"])
benchs <- read.csv(paste0("allBenchmarks_", fileext, ".csv"))
if (!is.null(usecase["filter"])) {
sel <- eval(parse(text=paste0("benchs$", usecase["filter"])))
benchs <- benchs[sel, ]
}
# get all figs
if (length(simvar) == 2)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = c(simvar[1], simvar[2]), errorbar = F)
ProteoMaker::visualize_benchmarks(benchs, 1:45, ref_par = simvar[1], errorbar = T)
# Specific metrics for use case
ProteoMaker::visualize_benchmarks(benchs, unlist(usecase["metrics"]), ref_par = simvar[1], errorbar = T)
hashes <- c("d7552dcbf33b90df38c8be0b7ed44422", "17cb18df640a5adb08c26c306c9c7a5e",
"13e77521591ebd20b923b93144cd6b64", "9136d53800e942cbb60295ca71598e6e",
"12c2e23aacfe42bf311e74f213036084", "3b53800ed67af996e8d3fe059f59844a",
"220409d1fa4c8bb0bea81b3a76f765bf", "7865701e4b427d382e0ca2769fdaec6e",
"b21dc635bddfe6b0102a8be697697bee", "bce71a99fc7900414c07ca3545ef4eca",
"e3605fc921f61a16a49419bb9729a8e4")
# Retrieve selected hashes from the server
pre_location <- "protprotocols.bmb.srv.sdu.dk:~/ProteoMaker/SimulatedDataSets/outputProteoformAb_"
for (run in runs) {
if (!file.exists(paste0("tmp/outputDataAnalysis_", run, ".RData"))) {
system(paste0("scp ", pre_location, run, ".RData tmp/"))
} else {
print(paste0("File for run ", run, " already exists locally."))
}
}
# Retrieve selected hashes from the server
pre_location <- "protprotocols.bmb.srv.sdu.dk:~/ProteoMaker/SimulatedDataSets/outputProteoformAb_"
for (run in hashes) {
if (!file.exists(paste0("tmp/outputDataAnalysis_", run, ".RData"))) {
system(paste0("scp ", pre_location, run, ".RData tmp/"))
} else {
print(paste0("File for run ", run, " already exists locally."))
}
}
print(cbind(PropModPerProt = seq(0, 1, 0.1)), hashes)
print(cbind(PropModPerProt = seq(0, 1, 0.1), hashes))
print(data.frame(PropModPerProt = seq(0, 1, 0.1), hashes))
write.csv(data.frame(PropModPerProt = seq(0, 1, 0.1), hashes), "OxProteoformAb_hashes.csv", row.names = FALSE)
write.csv(data.frame(PropModPerProt = seq(0, 1, 0.1), hashes), "tmp/OxProteoformAb_hashes.csv", row.names = FALSE)
hashes <- c("b855eac5ea58883a8765de82bab4cefe" ,"22ebd9bb7682943f072d851f7e8a78b4",
"7d340d32ccddb8a89f4a9918e205184d" ,"64aa06549b6bb31274c335bbcaf3d1e4",
"ea088c7a922b0c59ce3c68857599102f" ,"76d150d2d2ee8d99ee2177bc81a8ad08",
"c163d772d01c517bfe32965701130f2d" ,"1486155fec03f3023aaff462af341374",
"4b2a47710af2707094d02b18b9be204b" ,"4df07363bb951ceef408053f99c5e449",
"4ae75d6b6f87f65bb803b32dc6f82049")
# Retrieve selected hashes from the server
pre_location <- "protprotocols.bmb.srv.sdu.dk:~/ProteoMaker/SimulatedDataSets/outputProteoformAb_"
for (run in hashes) {
if (!file.exists(paste0("tmp/outputDataAnalysis_", run, ".RData"))) {
system(paste0("scp ", pre_location, run, ".RData tmp/"))
} else {
print(paste0("File for run ", run, " already exists locally."))
}
}
write.csv(data.frame(PropModPerProt = seq(0, 1, 0.1), hashes), "tmp/PhOxProteoformAb_hashes.csv", row.names = FALSE)
shiny::runApp('~/devel/Bioinformatics/EuBIC/ProteoMaker/inst/shiny')
